:root{
  --solid:#5b6778; --soft:#c08a3b; --soft-edge:#7a5520; --expl:#ff6b3d;
  --door:#22d3ee; --door-glow:#22d3ee55; --bg1:#0a1226; --bg2:#071020;
}
[data-bs-theme="light"]{
  --solid:#9aa7bb; --soft:#e4b469; --soft-edge:#b07b2e; --expl:#f97353;
  --door:#0ea5e9; --door-glow:#0ea5e955; --bg1:#edf2ff; --bg2:#e6eeff;
}

body{
  background: radial-gradient(900px 500px at 50% 20%, #16223f 0%, #0c1428 55%, #080b16 100%);
}
[data-bs-theme="light"] body{
  background: radial-gradient(900px 500px at 50% 20%, #f0f4ff 0%, #e8eeff 55%, #eaf0ff 100%);
}

.card-stage{border:1px solid #1f2a52}
[data-bs-theme="light"] .card-stage{border-color:#c7d2ff}

.canvas-stack{position:relative; width:624px; height:528px}
#game{
  position:absolute; inset:0;
  border-radius:18px; border:1px solid #1f2a52;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  box-shadow:0 20px 50px rgba(0,0,0,.30), inset 0 0 40px rgba(0,0,0,.25);
  image-rendering: pixelated;
}

.stage-3d{ perspective: 900px; }
.stage-3d.start-spin #game{ animation: stageSpin .6s ease-out; }
@keyframes stageSpin{
  0%{   transform: rotateX(14deg) rotateY(-18deg) scale(.94); opacity:.4 }
  60%{  transform: rotateX(-6deg) rotateY(6deg) scale(1.02); opacity:1 }
  100%{ transform: rotateX(0) rotateY(0) scale(1); }
}

.banner{ position:absolute; inset:0; display:grid; place-items:center; pointer-events:none; }
.banner.hidden{display:none}
#bannerText{
  padding:.6rem 1.2rem; border-radius:16px;
  font-weight:800; font-size:2rem; letter-spacing:.5px; color:#fff;
  background:linear-gradient(90deg,#111a33cc,#0b1226cc);
  border:1px solid #20305f; text-align:center;
  transform:scale(.7); opacity:0;
  filter:drop-shadow(0 8px 30px rgba(0,0,0,.45));
  animation: popIn .5s ease-out forwards;
}
@keyframes popIn { 0%{transform:scale(.7);opacity:0} 60%{transform:scale(1.1);opacity:1} 100%{transform:scale(1);opacity:1} }
@keyframes pulseLife { 0%{transform:scale(1)} 50%{transform:scale(1.25)} 100%{transform:scale(1)} }
.pulse-life{ animation:pulseLife .25s ease-out; }

.corner{position:absolute; padding:8px}
.corner.tl{left:0;top:0} .corner.tr{right:0;top:0}
.corner.bl{left:0;bottom:0} .corner.br{right:0;bottom:0}
.chip{
  display:inline-block; padding:4px 10px; border-radius:999px; font-size:.75rem;
  border:1px solid #20305f; background:#111a33aa; backdrop-filter:blur(6px);
}
.chip-cat{color:#84cc16;border-color:#3a5f2a}
.chip-mouse{color:#f87171;border-color:#5f2a2a}
.chip-dog{color:#f59e0b;border-color:#5f492a}
.chip-door{color:#22d3ee;border-color:#1f5f6a}
[data-bs-theme="light"] .chip{ background:#ffffffd0; border-color:#c7d2ff; }

.game-title {
  font-family: 'Press Start 2P', cursive;
  font-size: 1.4rem; letter-spacing: 2px; text-transform: uppercase;
  background: linear-gradient(90deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  animation: gradientShift 6s linear infinite;
}
@keyframes gradientShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

/* Volumen */
.vol-range{ width:110px; height:2px; }

/* TÃ¡ctil */
.touch-controls{
  position:absolute; inset:auto 0 0 0; padding:10px; display:flex; justify-content:space-between; align-items:flex-end;
  pointer-events:none;
}
.touch-controls .dpad{ pointer-events:auto; display:flex; flex-direction:column; gap:6px; margin:0 6px; }
.touch-controls .dpad .mid{ display:flex; gap:6px; justify-content:center; }
.touch-controls .dpad button{
  width:54px; height:54px; border-radius:12px; border:1px solid #20305f;
  background:#0e162dcc; color:#fff; font-weight:700;
}
.touch-controls .btn-bomb, .touch-controls .btn-pause{
  pointer-events:auto; border-radius:999px; border:1px solid #20305f; background:#0e162dcc; color:#fff;
}
.touch-controls .btn-bomb{ width:66px; height:66px; font-size:1.3rem; margin-right:8px; }
.touch-controls .btn-pause{ width:46px; height:46px; font-size:1rem; margin-right:6px; opacity:.85; }

/* Minimapa */
#minimap{ background: #0b1226; display:block; }

/* Reduce motion */
.reduce-motion #bannerText{ animation:none !important; }
.reduce-motion .stage-3d #game{ animation:none !important; }

/* Logros: tarjeta simple */
.ach-card{
  border:1px solid #1f2a52; border-radius:12px; padding:.75rem;
  display:flex; gap:.75rem; align-items:center; height:100%;
}
.ach-icon{ font-size:1.3rem; }
.ach-dim{ opacity:.45; filter:grayscale(1); }
